[{"lang":"en","lvl2":"Dependency\nSample","text":"It is also based on descriptors and the module bundlebee-java provides you an enriched DSL to generate them easily and integrated with any version of kubernetes-java descriptors:\nCreate a deployment - or more generally a Kubernetes descriptor - with the technique seen in previous part but don’t serialize it yet,\nCreate a manifest (BundleBee entry point),\nCreate an alveolus (a library/application recipe in BundleBee semantic),\nBind the descriptor you created to the reference BundleBee uses,\nFinally dump the manifest in a folder. This will create the correct BundleBee layout and if the underlyingDescriptor instance is attached and an Exportable of the kubernetes-java-$version module you use, then it will dump the descriptor as well in a single step!\ndon’t hesitate to create functions to instantiate the Descriptor using conventions to enforce the consistency in your deployment code. A typical case is to ame the descriptor from its underlying descriptor (reusing metadata name for example).","title":"Bundlebee Integration","url":"https://www.yupiik.io/kubernetes-java-descriptors/bundlebee-integration.html"},{"lang":"en","lvl2":"Maven setup\nJShell setup\nJBang Setup","text":"Maven setup is likely the easiest, what you have to do is:\nCreate a descriptor generation module,\nAdd the needed dependencies in this pom module (see bindings page if needed),\nWrite a main with the generation,\nUse exec-maven-plugin to run your main.\nHere is a skeleton:\nGet and create the output directory for this run (generally in target//${project.build.directory}),\nCreate your in memory descriptor,\nWrite your descriptor on the disk (or in a zip directly if you prefer).\nNow to execute this main you can just use this exec-maven-plugin in your Apache Maven configuration:\nNow if you run mvn prepare-package you will get your descriptors dumped in target/k8s-descriptors folder.\nYou can use this project with JShell, you just need to ensure the JShell classpath is correct when executing your script. As of today, you must ensure it contains:\n(optional for some setup but recommended) a JSON-P API and implementation,\n(optional) a JSON-B API and implementation,\nThe kubernetes-java-xxx version you need,\n(optional) bundlebee-java if you use it.\nHere is how to run a custom JShell script (note it assumes it runs on Linux and the jar were downloaded in current folder):\nThen you just need to write your script almost as in plain java:\nImport the classes you need (here we use a wildcard import on the model because it is safe for our script but you can use explicit imports),\nA small trick to write a readable script is to enable multiline snippet by wrapping the code in a block (rest of the code is similar to previous ones),\nFinally when finished we exit JShell.\na way to write the script as a standard Java code with classes and a final standard main class (Runner). This will enable you to setup the dependencies in your IDE and run the main as a standard class (ensure to name your file <scriptname>.java). Then to execute it through JShell - where /exit is needed - use this command: echo 'Runner.main();/exit' | jshell --class-path …. --startup <scriptname>.java. This will automatically load your script and exeute the main before exiting the shell.\nJBang can also be used to generate your descriptors. Here is a script directly runnable with one of these runner:\nFrom Maven/Gradle\nFrom the command line if you installed jbang (either making your script executable - ///usr/bin/env jbang \"$0\" \"$@\" ; exit $? or using jbang $script),\nFrom jbang-actions (Github Actions integration)\nIt is pretty much the same script than before but we handled the classpath thanks to //DEPS directive which can be convenient if you are already using JBang.\nTo set it with Github Actions use:","title":"CI Setup","url":"https://www.yupiik.io/kubernetes-java-descriptors/ci-setup.html"},{"lang":"en","lvl2":"Key features\nOverview\nGo further with BundleBee\nChoose your version\nNPM support","text":"Versionned Kubernetes API (so you can change of cluster easily and identify the breaking change if any),\nTyped API (so less typo error),\nJava based (so well known and tooled in the industry),\nJava based bis (so easily industrializable - you can create reusable libraries to help you to avoid to write the boilerplate),\nDSL provided: easy to write code generating descriptors,\nJSON-P friendly (so it is easy to reuse JSON features like formatting, JSON-Patch etc…),\nJSON-B friendly (so you can bind descriptors you would load yourself or already generated quite easily),\nLight (By default the modules are dependency free until you generate a descriptor needing JSON-P which is the only required library at runtime).\nHigh level, the project provides you dependencies/libraries with enable you to use a DSL to create descriptors.\nIf we want to create the descriptor corresponding to this YAML (sample taken from Kubernetes documentation):\nyou can write this snippet:\nThe output is not formatted but you can use JSON-P to format it quite easily:\nThis will output this descriptor (keep in mind JSON is a valid YAML descriptor):\nFor now we didn’t do much better than what we would have done manually but now, if we rewrite our base generation we can see why coding its descriptors is interesting:\nWe can extract variables reused accross the descriptor without copy/paste or search/replace operation which are error prone,\nWe just inject variables instead of values.\nUntil there you can reach this same goal with Yupiik Bundlebee or Helm since it is mainly using placeholders but what if you could use your own easy to write functions? This is exactly what makes it very powerful and enterprise friendly:\nWe create a reusable function in our preferred language (or \"well known\" at least),\nThis function enforces pods to inherit from deployment labels,\nAnd also containers to have limits for resources.\nThe usage is pretty straight forward since it is just calling a java function from java code.\nExtracted like that, all the project/ops/architects rules can easily be enforced and validated at build/CI time.\nif you set properly the classpath this is compatible with JShell but a mvn exec:java setup also works very smoothly.\nYupiik BundleBee is a Kubernetes package manager to ease your deployment on your Kubernetes clusters (from minikube to production clusters). It is also based on descriptors and the module bundlebee-java provides you an enriched DSL to generate them easily and integrated with any version of kubernetes-java descriptors:\nCreate a deployment - or more generally a Kubernetes descriptor - with the technique seen in previous part but don’t serialize it yet,\nCreate a manifest (BundleBee entry point),\nCreate an alveolus (a library/application recipe in BundleBee semantic),\nBind the descriptor you created to the reference BundleBee uses,\nFinally dump the manifest in a folder. This will create the correct BundleBee layout and if the underlyingDescriptor instance is attached and an Exportable of the kubernetes-java-$version module you use, then it will dump the descriptor as well in a single step!\ndon’t hesitate to create functions to instantiate the Descriptor using conventions to enforce the consistency in your deployment code. A typical case is to ame the descriptor from its underlying descriptor (reusing metadata name for example).\nTo ensure you target the right descriptor for your cluster, it is recommended to use as dependency the module you target. Typically, if you target Kubernetes 1.24.3, you will use the module kubernetes-java-1.24.3.\nYou can check on the binding list page the one you need.\nWe provide an experimental support for typescript applications/scripts. It is mainly about providing the model as .d.ts. For more information, read about NPM bundles documentation.","title":"Getting Started","url":"https://www.yupiik.io/kubernetes-java-descriptors/getting-started.html"},{"lang":"en","text":"","title":"Index","url":"https://www.yupiik.io/kubernetes-java-descriptors/index.html"},{"lang":"en","lvl2":"Version 1.33.3\nVersion 1.33.2\nVersion 1.33.1\nVersion 1.33.0\nVersion 1.32.7\nVersion 1.32.6\nVersion 1.32.5\nVersion 1.32.4\nVersion 1.32.3\nVersion 1.32.2\nVersion 1.32.1\nVersion 1.32.0\nVersion 1.31.11\nVersion 1.31.10\nVersion 1.31.9\nVersion 1.31.8\nVersion 1.31.7\nVersion 1.31.6\nVersion 1.31.5\nVersion 1.31.4\nVersion 1.31.3\nVersion 1.31.2\nVersion 1.31.1\nVersion 1.31.0\nVersion 1.30.14\nVersion 1.30.13\nVersion 1.30.12\nVersion 1.30.11\nVersion 1.30.10\nVersion 1.30.9\nVersion 1.30.8\nVersion 1.30.7\nVersion 1.30.6\nVersion 1.30.5\nVersion 1.30.4\nVersion 1.30.3\nVersion 1.30.2\nVersion 1.30.1\nVersion 1.30.0\nVersion 1.29.15\nVersion 1.29.14\nVersion 1.29.13\nVersion 1.29.12\nVersion 1.29.11\nVersion 1.29.10\nVersion 1.29.9\nVersion 1.29.8\nVersion 1.29.7\nVersion 1.29.6\nVersion 1.29.5\nVersion 1.29.4\nVersion 1.29.3\nVersion 1.29.2\nVersion 1.29.1\nVersion 1.29.0\nVersion 1.28.15\nVersion 1.28.14\nVersion 1.28.13\nVersion 1.28.12\nVersion 1.28.11\nVersion 1.28.10\nVersion 1.28.9\nVersion 1.28.8\nVersion 1.28.7\nVersion 1.28.6\nVersion 1.28.5\nVersion 1.28.4\nVersion 1.28.3\nVersion 1.28.2\nVersion 1.28.1\nVersion 1.28.0\nVersion 1.27.16\nVersion 1.27.15\nVersion 1.27.14\nVersion 1.27.13\nVersion 1.27.12\nVersion 1.27.11\nVersion 1.27.10\nVersion 1.27.9\nVersion 1.27.8\nVersion 1.27.7\nVersion 1.27.6\nVersion 1.27.5\nVersion 1.27.4\nVersion 1.27.3\nVersion 1.27.2\nVersion 1.27.1\nVersion 1.27.0\nVersion 1.26.15\nVersion 1.26.14\nVersion 1.26.13\nVersion 1.26.12\nVersion 1.26.11\nVersion 1.26.10\nVersion 1.26.9\nVersion 1.26.8\nVersion 1.26.7\nVersion 1.26.6\nVersion 1.26.5\nVersion 1.26.4\nVersion 1.26.3\nVersion 1.26.2\nVersion 1.26.1\nVersion 1.26.0\nVersion 1.25.16\nVersion 1.25.15\nVersion 1.25.14\nVersion 1.25.13\nVersion 1.25.12\nVersion 1.25.11\nVersion 1.25.10\nVersion 1.25.9\nVersion 1.25.8\nVersion 1.25.7\nVersion 1.25.6\nVersion 1.25.5\nVersion 1.25.4\nVersion 1.25.3\nVersion 1.25.2\nVersion 1.25.1\nVersion 1.25.0\nVersion 1.24.17\nVersion 1.24.16\nVersion 1.24.15\nVersion 1.24.14\nVersion 1.24.13\nVersion 1.24.12\nVersion 1.24.11\nVersion 1.24.10\nVersion 1.24.9\nVersion 1.24.8\nVersion 1.24.7\nVersion 1.24.6\nVersion 1.24.5\nVersion 1.24.4\nVersion 1.24.3\nVersion 1.24.2\nVersion 1.24.1\nVersion 1.24.0\nVersion 1.23.17\nVersion 1.23.16\nVersion 1.23.15\nVersion 1.23.14\nVersion 1.23.13\nVersion 1.23.12\nVersion 1.23.11\nVersion 1.23.10\nVersion 1.23.9\nVersion 1.23.8\nVersion 1.23.7\nVersion 1.23.6\nVersion 1.23.5\nVersion 1.23.4\nVersion 1.23.3\nVersion 1.23.2\nVersion 1.23.1\nVersion 1.23.0\nVersion 1.22.17\nVersion 1.22.16\nVersion 1.22.15\nVersion 1.22.14\nVersion 1.22.13\nVersion 1.22.12\nVersion 1.22.11\nVersion 1.22.10\nVersion 1.22.9\nVersion 1.22.8\nVersion 1.22.7\nVersion 1.22.6\nVersion 1.22.5\nVersion 1.22.4\nVersion 1.22.3\nVersion 1.22.2\nVersion 1.22.1\nVersion 1.22.0","lvl3":"Dependencies","text":"This module targets Kubernetes v1.33.3.\nThis module targets Kubernetes v1.33.2.\nThis module targets Kubernetes v1.33.1.\nThis module targets Kubernetes v1.33.0.\nThis module targets Kubernetes v1.32.7.\nThis module targets Kubernetes v1.32.6.\nThis module targets Kubernetes v1.32.5.\nThis module targets Kubernetes v1.32.4.\nThis module targets Kubernetes v1.32.3.\nThis module targets Kubernetes v1.32.2.\nThis module targets Kubernetes v1.32.1.\nThis module targets Kubernetes v1.32.0.\nThis module targets Kubernetes v1.31.11.\nThis module targets Kubernetes v1.31.10.\nThis module targets Kubernetes v1.31.9.\nThis module targets Kubernetes v1.31.8.\nThis module targets Kubernetes v1.31.7.\nThis module targets Kubernetes v1.31.6.\nThis module targets Kubernetes v1.31.5.\nThis module targets Kubernetes v1.31.4.\nThis module targets Kubernetes v1.31.3.\nThis module targets Kubernetes v1.31.2.\nThis module targets Kubernetes v1.31.1.\nThis module targets Kubernetes v1.31.0.\nThis module targets Kubernetes v1.30.14.\nThis module targets Kubernetes v1.30.13.\nThis module targets Kubernetes v1.30.12.\nThis module targets Kubernetes v1.30.11.\nThis module targets Kubernetes v1.30.10.\nThis module targets Kubernetes v1.30.9.\nThis module targets Kubernetes v1.30.8.\nThis module targets Kubernetes v1.30.7.\nThis module targets Kubernetes v1.30.6.\nThis module targets Kubernetes v1.30.5.\nThis module targets Kubernetes v1.30.4.\nThis module targets Kubernetes v1.30.3.\nThis module targets Kubernetes v1.30.2.\nThis module targets Kubernetes v1.30.1.\nThis module targets Kubernetes v1.30.0.\nThis module targets Kubernetes v1.29.15.\nThis module targets Kubernetes v1.29.14.\nThis module targets Kubernetes v1.29.13.\nThis module targets Kubernetes v1.29.12.\nThis module targets Kubernetes v1.29.11.\nThis module targets Kubernetes v1.29.10.\nThis module targets Kubernetes v1.29.9.\nThis module targets Kubernetes v1.29.8.\nThis module targets Kubernetes v1.29.7.\nThis module targets Kubernetes v1.29.6.\nThis module targets Kubernetes v1.29.5.\nThis module targets Kubernetes v1.29.4.\nThis module targets Kubernetes v1.29.3.\nThis module targets Kubernetes v1.29.2.\nThis module targets Kubernetes v1.29.1.\nThis module targets Kubernetes v1.29.0.\nThis module targets Kubernetes v1.28.15.\nThis module targets Kubernetes v1.28.14.\nThis module targets Kubernetes v1.28.13.\nThis module targets Kubernetes v1.28.12.\nThis module targets Kubernetes v1.28.11.\nThis module targets Kubernetes v1.28.10.\nThis module targets Kubernetes v1.28.9.\nThis module targets Kubernetes v1.28.8.\nThis module targets Kubernetes v1.28.7.\nThis module targets Kubernetes v1.28.6.\nThis module targets Kubernetes v1.28.5.\nThis module targets Kubernetes v1.28.4.\nThis module targets Kubernetes v1.28.3.\nThis module targets Kubernetes v1.28.2.\nThis module targets Kubernetes v1.28.1.\nThis module targets Kubernetes v1.28.0.\nThis module targets Kubernetes v1.27.16.\nThis module targets Kubernetes v1.27.15.\nThis module targets Kubernetes v1.27.14.\nThis module targets Kubernetes v1.27.13.\nThis module targets Kubernetes v1.27.12.\nThis module targets Kubernetes v1.27.11.\nThis module targets Kubernetes v1.27.10.\nThis module targets Kubernetes v1.27.9.\nThis module targets Kubernetes v1.27.8.\nThis module targets Kubernetes v1.27.7.\nThis module targets Kubernetes v1.27.6.\nThis module targets Kubernetes v1.27.5.\nThis module targets Kubernetes v1.27.4.\nThis module targets Kubernetes v1.27.3.\nThis module targets Kubernetes v1.27.2.\nThis module targets Kubernetes v1.27.1.\nThis module targets Kubernetes v1.27.0.\nThis module targets Kubernetes v1.26.15.\nThis module targets Kubernetes v1.26.14.\nThis module targets Kubernetes v1.26.13.\nThis module targets Kubernetes v1.26.12.\nThis module targets Kubernetes v1.26.11.\nThis module targets Kubernetes v1.26.10.\nThis module targets Kubernetes v1.26.9.\nThis module targets Kubernetes v1.26.8.\nThis module targets Kubernetes v1.26.7.\nThis module targets Kubernetes v1.26.6.\nThis module targets Kubernetes v1.26.5.\nThis module targets Kubernetes v1.26.4.\nThis module targets Kubernetes v1.26.3.\nThis module targets Kubernetes v1.26.2.\nThis module targets Kubernetes v1.26.1.\nThis module targets Kubernetes v1.26.0.\nThis module targets Kubernetes v1.25.16.\nThis module targets Kubernetes v1.25.15.\nThis module targets Kubernetes v1.25.14.\nThis module targets Kubernetes v1.25.13.\nThis module targets Kubernetes v1.25.12.\nThis module targets Kubernetes v1.25.11.\nThis module targets Kubernetes v1.25.10.\nThis module targets Kubernetes v1.25.9.\nThis module targets Kubernetes v1.25.8.\nThis module targets Kubernetes v1.25.7.\nThis module targets Kubernetes v1.25.6.\nThis module targets Kubernetes v1.25.5.\nThis module targets Kubernetes v1.25.4.\nThis module targets Kubernetes v1.25.3.\nThis module targets Kubernetes v1.25.2.\nThis module targets Kubernetes v1.25.1.\nThis module targets Kubernetes v1.25.0.\nThis module targets Kubernetes v1.24.17.\nThis module targets Kubernetes v1.24.16.\nThis module targets Kubernetes v1.24.15.\nThis module targets Kubernetes v1.24.14.\nThis module targets Kubernetes v1.24.13.\nThis module targets Kubernetes v1.24.12.\nThis module targets Kubernetes v1.24.11.\nThis module targets Kubernetes v1.24.10.\nThis module targets Kubernetes v1.24.9.\nThis module targets Kubernetes v1.24.8.\nThis module targets Kubernetes v1.24.7.\nThis module targets Kubernetes v1.24.6.\nThis module targets Kubernetes v1.24.5.\nThis module targets Kubernetes v1.24.4.\nThis module targets Kubernetes v1.24.3.\nThis module targets Kubernetes v1.24.2.\nThis module targets Kubernetes v1.24.1.\nThis module targets Kubernetes v1.24.0.\nThis module targets Kubernetes v1.23.17.\nThis module targets Kubernetes v1.23.16.\nThis module targets Kubernetes v1.23.15.\nThis module targets Kubernetes v1.23.14.\nThis module targets Kubernetes v1.23.13.\nThis module targets Kubernetes v1.23.12.\nThis module targets Kubernetes v1.23.11.\nThis module targets Kubernetes v1.23.10.\nThis module targets Kubernetes v1.23.9.\nThis module targets Kubernetes v1.23.8.\nThis module targets Kubernetes v1.23.7.\nThis module targets Kubernetes v1.23.6.\nThis module targets Kubernetes v1.23.5.\nThis module targets Kubernetes v1.23.4.\nThis module targets Kubernetes v1.23.3.\nThis module targets Kubernetes v1.23.2.\nThis module targets Kubernetes v1.23.1.\nThis module targets Kubernetes v1.23.0.\nThis module targets Kubernetes v1.22.17.\nThis module targets Kubernetes v1.22.16.\nThis module targets Kubernetes v1.22.15.\nThis module targets Kubernetes v1.22.14.\nThis module targets Kubernetes v1.22.13.\nThis module targets Kubernetes v1.22.12.\nThis module targets Kubernetes v1.22.11.\nThis module targets Kubernetes v1.22.10.\nThis module targets Kubernetes v1.22.9.\nThis module targets Kubernetes v1.22.8.\nThis module targets Kubernetes v1.22.7.\nThis module targets Kubernetes v1.22.6.\nThis module targets Kubernetes v1.22.5.\nThis module targets Kubernetes v1.22.4.\nThis module targets Kubernetes v1.22.3.\nThis module targets Kubernetes v1.22.2.\nThis module targets Kubernetes v1.22.1.\nThis module targets Kubernetes v1.22.0.","title":"Kubernetes Java Bindings","url":"https://www.yupiik.io/kubernetes-java-descriptors/kubernetes-java-bindings.html"},{"lang":"en","lvl2":"Features\nHow to use","text":"this support is experimental for now, if validated we would envision to release the bundles on npm registry and therefore this documentation would be outdated.\nFrom the build, we generate .d.ts enabling you to get typescript build validation and completion in your preferred IDE to write script.\nFor now, the declaration files are only pushed to Maven central repository and not yet to npm registry. Therefore to set it up, you must download the files from your build. Here is how to do it:\nWe import typescript to ensure we have the syntax validation and the completion in the editors,\nWe execute after the installation - could be before - a script which will download and setup the kubernetes-descriptors dependency.\nkubernetes-descriptors.install.mjs will simply download the d.ts and package.json file in the right version from central:\nNow just execute npm i and you will be set up.\nTo start generating kubernetes descriptors, just create a script index.ts you will execute with npm run generate. To do it we first add this script in our package.json:\nThe new command we add to generate the descriptors.\nAnd the script itself will import the model to modelize the descriptors and will serialize the model as JSON:\nImport the root namespace of the descriptors,\nAlias (to be shorter) the actual namespace we target (the version in general),\nCreate a model matching the expected type (here Deployment), this is what gives us completion and validation,\nJust export the model writing the model (deployment) as JSON (thanks JSON.stringify) on the filesystem.","title":"NPM support","url":"https://www.yupiik.io/kubernetes-java-descriptors/npm.html"}]