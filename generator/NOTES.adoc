= Notes

[source,java]
----
package io.yupiik.kubernetes.bindings.v1_24_3;

import io.yupiik.kubernetes.bindings.v1_24_3.v1.Container;
import io.yupiik.kubernetes.bindings.v1_24_3.v1.Deployment;
import io.yupiik.kubernetes.bindings.v1_24_3.v1.DeploymentSpec;
import io.yupiik.kubernetes.bindings.v1_24_3.v1.ObjectMeta;
import io.yupiik.kubernetes.bindings.v1_24_3.v1.OwnerReference;
import io.yupiik.kubernetes.bindings.v1_24_3.v1.PodSpec;
import io.yupiik.kubernetes.bindings.v1_24_3.v1.PodTemplateSpec;
import jakarta.json.JsonObject;
import jakarta.json.bind.JsonbBuilder;
import jakarta.json.bind.JsonbConfig;

import java.util.List;
import java.util.Map;

/*
  <dependencies>
    <dependency>
      <groupId>io.yupiik.uship</groupId>
      <artifactId>backbone-johnzon</artifactId>
      <version>1.0.8</version>
    </dependency>

    <dependency>
      <groupId>io.yupiik.uship</groupId>
      <artifactId>json-dependencies</artifactId>
      <version>1.0.8</version>
      <type>pom</type>
    </dependency>
  </dependencies>
 */
public class Tester {
    public static void main(final String... args) throws Exception {
        try (final var jsonb = JsonbBuilder.create(new JsonbConfig().withFormatting(true))) {
            final var json = new Deployment()
                    .metadata(new ObjectMeta()
                            .name("test-app")
                            .annotations(Map.of("io.kubernetes/name", "test-app"))
                            .finalizers(List.of("finalizer/default"))
                            .ownerReferences(List.of(new OwnerReference()
                                    .name("owner1"))))
                    .spec(new DeploymentSpec()
                            .replicas(3)
                            .template(new PodTemplateSpec()
                                    .spec(new PodSpec()
                                            .containers(List.of(new Container()
                                                    .image("alpine:latest")
                                                    .name("linux"))))))
                    .validate()
                    .asJson();
            System.out.println("--------- DEFAULT ------------");
            System.out.println(json);
            System.out.println("--------- FROM JSON ------------");
            final var from = jsonb.fromJson(json, JsonObject.class);
            System.out.println("---------- TO JSON -----------");
            System.out.println(jsonb.toJson(from));
        }
    }
}
----

[source,json]
----
--------- DEFAULT ------------
{"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{"io.kubernetes/name":"test-app"},"finalizers":["finalizer/default"],"name":"test-app","ownerReferences":[{"name":"owner1"}]},"spec":{"replicas":3,"template":{"spec":{"containers":[{"image":"alpine:latest","name":"linux"}]}}}}
---------- TO JSON -----------
{
  "apiVersion":"apps/v1",
  "kind":"Deployment",
  "metadata":{
    "annotations":{
      "io.kubernetes/name":"test-app"
    },
    "finalizers":[
      "finalizer/default"
    ],
    "name":"test-app",
    "ownerReferences":[
      {
        "name":"owner1"
      }
    ]
  },
  "spec":{
    "replicas":3,
    "template":{
      "spec":{
        "containers":[
          {
            "image":"alpine:latest",
            "name":"linux"
          }
        ]
      }
    }
  }
}

Process finished with exit code 0

----